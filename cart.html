<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - Wood Work by Tanisha</title>

<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>

<body>

<!-- NAVBAR -->
<nav class="fixed w-full bg-white/80 backdrop-blur shadow-sm px-10 py-5 flex justify-between items-center z-50">
<h1 class="text-2xl">Wood Work <span class="italic font-light">by Tanisha</span></h1>

<div class="flex gap-8 uppercase text-sm tracking-wider">
<a href="index.html">Home</a>
<a href="collection.html">Collection</a>
</div>
</nav>

<div class="h-28"></div>

<section class="max-w-7xl mx-auto px-8 py-16 grid md:grid-cols-3 gap-12">

<div class="md:col-span-2">
<h2 class="text-4xl mb-10">Your Order</h2>
<div id="cart-items"></div>
</div>

<div class="bg-white p-8 rounded-xl shadow-lg h-fit">
<h3 class="text-2xl mb-6">Order Summary</h3>

<div class="flex justify-between mb-4">
<span>Subtotal</span>
<span>₹<span id="subtotal">0</span></span>
</div>

<div class="flex justify-between mb-4">
<span>GST (18%)</span>
<span>₹<span id="gst">0</span></span>
</div>

<hr class="my-6">

<div class="flex justify-between text-xl font-semibold mb-6">
<span>Total</span>
<span>₹<span id="total">0</span></span>
</div>

<button onclick="payNow()"
class="w-full bg-black text-white py-3 uppercase tracking-wider mb-4 hover:bg-[#C8A96A]">
Pay Securely
</button>

<button onclick="whatsAppOrder()"
class="w-full border border-black py-3 uppercase tracking-wider hover:bg-black hover:text-white">
Order via WhatsApp
</button>
</div>

</section>

<footer class="bg-black text-white text-center py-12">
© 2026 Wood Work by Tanisha
</footer>

<script>

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function renderCart(){

let container = document.getElementById("cart-items");
container.innerHTML = "";

if(cart.length === 0){
container.innerHTML = "<p>Your cart is empty.</p>";
updateTotals(0);
return;
}

let subtotal = 0;

cart.forEach((item,index)=>{

if(!item.qty) item.qty = 1;

subtotal += item.price * item.qty;

container.innerHTML += `
<div class="bg-white p-6 rounded-xl shadow mb-6 flex justify-between items-center">

<div>
<h4 class="text-xl">${item.name}</h4>
<p>₹${item.price}</p>
</div>

<div class="flex items-center gap-4">
<button onclick="changeQty(${index},-1)" class="px-3 py-1 bg-gray-200 rounded">-</button>
<span>${item.qty}</span>
<button onclick="changeQty(${index},1)" class="px-3 py-1 bg-gray-200 rounded">+</button>
<button onclick="removeItem(${index})" class="px-3 py-1 bg-red-500 text-white rounded">
Remove
</button>
</div>

</div>
`;
});

updateTotals(subtotal);
}

function updateTotals(subtotal){
let gst = subtotal * 0.18;
let total = subtotal + gst;

document.getElementById("subtotal").innerText = subtotal;
document.getElementById("gst").innerText = Math.round(gst);
document.getElementById("total").innerText = Math.round(total);
}

function changeQty(index,change){
cart[index].qty += change;
if(cart[index].qty <= 0){
cart.splice(index,1);
}
localStorage.setItem("cart", JSON.stringify(cart));
renderCart();
}

function removeItem(index){
cart.splice(index,1);
localStorage.setItem("cart", JSON.stringify(cart));
renderCart();
}

function payNow(){
let total = parseInt(document.getElementById("total").innerText);

if(total === 0){
alert("Cart is empty");
return;
}

var options = {
key: "rzp_test_yourkey",
amount: total * 100,
currency: "INR",
name: "Wood Work by Tanisha",
description: "Furniture Order",
handler: function(){
alert("Payment Successful!");
localStorage.removeItem("cart");
cart = [];
renderCart();
}
};

var rzp = new Razorpay(options);
rzp.open();
}

function whatsAppOrder(){
if(cart.length === 0){
alert("Cart is empty");
return;
}

let message = "I want to order:%0A";

cart.forEach(item=>{
message += `${item.name} - Qty: ${item.qty}%0A`;
});

message += `%0ATotal: ₹${document.getElementById("total").innerText}`;

window.open(`https://wa.me/919828288383?text=${message}`);
}

renderCart();

</script>

</body>
</html>
