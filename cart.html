<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart - WoodworkbyTanishas</title>

<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<style>
body{font-family:'Manrope',sans-serif;background:#FDF9F4;color:#1F180D;}
h1,h2,h3{font-family:'Playfair Display',serif;}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav class="flex justify-between items-center px-8 py-5 bg-black text-white">
<h1 class="text-2xl">WoodworkbyTanishas</h1>
<div class="flex gap-6">
<a href="index.html">Home</a>
<a href="products.html">Products</a>
<a href="cart.html">Cart</a>
</div>
</nav>

<!-- CART SECTION -->
<section class="max-w-6xl mx-auto px-6 py-16">
<h2 class="text-4xl mb-8">Your Cart</h2>

<div id="cart-container"></div>

<div class="mt-10 text-right">
<h3 class="text-2xl">Total: ₹<span id="total-price">0</span></h3>

<div class="mt-6 flex justify-end gap-4">
<button onclick="payNow()" class="bg-black text-white px-6 py-3">
Pay with Razorpay
</button>

<button onclick="sendWhatsAppOrder()" class="bg-green-500 text-white px-6 py-3">
Order on WhatsApp
</button>
</div>
</div>
</section>

<footer class="bg-black text-white text-center py-6">
© 2026 WoodworkbyTanishas
</footer>

<script>

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function renderCart(){
let container = document.getElementById("cart-container");
container.innerHTML = "";

let total = 0;

cart.forEach((item,index)=>{
if(!item.qty) item.qty = 1;
total += item.price * item.qty;

container.innerHTML += `
<div class="bg-white shadow p-6 mb-6 flex justify-between items-center">
<div class="flex items-center gap-6">
<img src="${item.image}" class="w-24 h-24 object-cover">
<div>
<h3 class="text-xl">${item.name}</h3>
<p>₹${item.price}</p>
</div>
</div>

<div class="flex items-center gap-4">
<button onclick="changeQty(${index}, -1)" class="px-3 py-1 bg-gray-300">-</button>
<span>${item.qty}</span>
<button onclick="changeQty(${index}, 1)" class="px-3 py-1 bg-gray-300">+</button>
<button onclick="removeItem(${index})" class="px-3 py-1 bg-red-500 text-white">
Remove
</button>
</div>
</div>
`;
});

document.getElementById("total-price").innerText = total;
}

function changeQty(index, change){
cart[index].qty += change;
if(cart[index].qty <= 0){
cart.splice(index,1);
}
localStorage.setItem("cart", JSON.stringify(cart));
renderCart();
}

function removeItem(index){
cart.splice(index,1);
localStorage.setItem("cart", JSON.stringify(cart));
renderCart();
}

function payNow(){
let total = cart.reduce((sum,item)=> sum + item.price * item.qty, 0);

if(total === 0){
alert("Cart is empty!");
return;
}

var options = {
key: "rzp_test_yourkey", // Replace with your Razorpay key
amount: total * 100,
currency: "INR",
name: "WoodworkbyTanishas",
description: "Furniture Order",
handler: function (){
alert("Payment Successful!");
localStorage.removeItem("cart");
cart = [];
renderCart();
}
};

var rzp = new Razorpay(options);
rzp.open();
}

function sendWhatsAppOrder(){
if(cart.length === 0){
alert("Cart is empty!");
return;
}

let message = "I want to order:%0A";

cart.forEach(item=>{
message += `${item.name} - Qty: ${item.qty}%0A`;
});

message += `%0ATotal: ₹${document.getElementById("total-price").innerText}`;

window.open(`https://wa.me/919828288383?text=${message}`);
}

renderCart();

</script>

</body>
</html>
